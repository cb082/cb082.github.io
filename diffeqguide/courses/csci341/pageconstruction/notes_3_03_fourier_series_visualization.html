<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interactive Fourier Series Visualization Module</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: auto;
      line-height: 1.6;
      padding: 20px;
      background-color: #f8f8f8;
    }
    h1, h2, h3 { color: #003366; }
    section {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 25px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    textarea {
      width: 100%;
      height: 380px;
      font-family: monospace;
    }
    .note {
      background: #eef4ff;
      border-left: 4px solid #003366;
      padding: 10px 12px;
      margin: 12px 0 18px;
      border-radius: 6px;
    }
  </style>
</head>
<body>

<h1>Interactive Fourier Series Visualization Module</h1>

<p class="note">
This page embeds <strong>SageMathCell</strong> to compute Fourier coefficients and plot the partial sums.
After the page loads, click the blue button in each section (<em>Run Fourier Visualization</em>), then adjust
the slider for \(N\) to see the Fourier approximation converge.
</p>

<p>
We visualize Fourier series on \([-L, L]\) (default \(L=\pi\)):
\[
f(x) \sim \frac{a_0}{2} + \sum_{n=1}^{\infty}
\left( a_n \cos\!\left(\frac{n\pi x}{L}\right) + b_n \sin\!\left(\frac{n\pi x}{L}\right) \right),
\]
with
\[
a_n = \frac{1}{L}\!\int_{-L}^{L} f(x)\cos\!\left(\frac{n\pi x}{L}\right)\,dx,\quad
b_n = \frac{1}{L}\!\int_{-L}^{L} f(x)\sin\!\left(\frac{n\pi x}{L}\right)\,dx.
\]
</p>

<h2>1) Odd Function: \( f(x) = x \)</h2>
<section id="odd">
  <p>For this odd function, the Fourier series has only <em>sine</em> terms.</p>
  <div class="sagecell">
    <textarea>
var('x, n')
f(x) = x
L = pi

a0 = (1/L)*integral(f(x), (x, -L, L))
an(n) = (1/L)*integral(f(x)*cos(n*pi*x/L), (x, -L, L))
bn(n) = (1/L)*integral(f(x)*sin(n*pi*x/L), (x, -L, L))

def S_N(x, N):
    return a0/2 + sum(an(k)*cos(k*pi*x/L) + bn(k)*sin(k*pi*x/L) for k in range(1, N+1))

@interact
def _(N=(1, 30)):
    show(plot(f(x), (x, -L, L), color='black', thickness=3, legend_label='f(x)')
         + plot(S_N(x, N), (x, -L, L), color='red', legend_label=f'N={N}'),
         ymin=-4, ymax=4, figsize=5)
    </textarea>
  </div>
</section>

<h2>2) Even Function: \( f(x) = |x| \)</h2>
<section id="even">
  <p>For this even function, the Fourier series has only <em>cosine</em> terms.</p>
  <div class="sagecell">
    <textarea>
var('x, n')
f(x) = abs(x)
L = pi

a0 = (1/L)*integral(f(x), (x, -L, L))
an(n) = (1/L)*integral(f(x)*cos(n*pi*x/L), (x, -L, L))
bn(n) = (1/L)*integral(f(x)*sin(n*pi*x/L), (x, -L, L))

def S_N(x, N):
    return a0/2 + sum(an(k)*cos(k*pi*x/L) + bn(k)*sin(k*pi*x/L) for k in range(1, N+1))

@interact
def _(N=(1, 30)):
    show(plot(f(x), (x, -L, L), color='black', thickness=3, legend_label='f(x)')
         + plot(S_N(x, N), (x, -L, L), color='blue', legend_label=f'N={N}'),
         ymin=-1, ymax=4, figsize=5)
    </textarea>
  </div>
</section>

<h2>3) Custom Function</h2>
<section id="custom">
  <p>Enter any function of <code>x</code> (e.g., <code>sin(x)</code>, <code>x^2</code>, <code>abs(x)</code>, or a <code>piecewise</code> definition).</p>
  <div class="sagecell">
    <textarea>
var('x, n')
# Enter your function below:
f(x) = x^2   # Change this line to define your own function
L = pi

a0 = (1/L)*integral(f(x), (x, -L, L))
an(n) = (1/L)*integral(f(x)*cos(n*pi*x/L), (x, -L, L))
bn(n) = (1/L)*integral(f(x)*sin(n*pi*x/L), (x, -L, L))

def S_N(x, N):
    return a0/2 + sum(an(k)*cos(k*pi*x/L) + bn(k)*sin(k*pi*x/L) for k in range(1, N+1))

@interact
def _(N=(1, 30)):
    show(plot(f(x), (x, -L, L), color='black', thickness=3, legend_label='f(x)')
         + plot(S_N(x, N), (x, -L, L), color='green', legend_label=f'N={N}'),
         ymin=-4, ymax=4, figsize=5)
    </textarea>
  </div>
</section>

<script>
  // Initialize all Sage cells on the page
  sagecell.makeSagecell({
    inputLocation: '.sagecell',
    evalButtonText: 'Run Fourier Visualization',
    linked: false
  });
</script>

</body>
</html>
